name: render readme

# Controls when the action will run
on:
  repository_dispatch:
    types: [push-live] 
  push:
    branches: main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'

      - name: Overwrite file
        uses: "DamianReeves/write-file-action@master"
        with:
          node-version: '16'
          path: main/info.txt
          write-mode: preserve 
          contents: |
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <link rel="stylesheet" href="styles.css">
                <title>Vanilla JavaScript App</title>
            </head>
            <body>
                <main>
                <h1>Customer Approval Page</h1>
                <h2> <customer name> </h2>
                </main>
            </body>
            </html>     
            
      - name: Commit & Push
        uses: Andro999b/push@v1.3
        with:
          node-version: '16'
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: main
          force: true
          message: 'Overwritten by Github Actions - ${date}'
