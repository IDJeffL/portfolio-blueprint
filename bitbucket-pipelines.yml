#  Template NodeJS build

#  This template allows you to validate your NodeJS code.
#  The workflow allows running tests and code linting on the default branch.

image: node:16

pipelines:
  branches:
    main:
      - step:
          script:
            - pipe: atlassian/rsync-deploy:0.3.2
              variables:
                EXTRA_ARGS: '--exclude=UPDATE.md'
                
            - echo "Updated build ${BITBUCKET_BUILD_NUMBER}" >> UPDATES.md
            - git add UPDATES.md
            - git commit -m "Updating UPDATES.md with latest build number."
            - git push
